<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!--NewPage-->
<HTML>
<HEAD>
<!-- Generated by javadoc (build 1.6.0_38) on Sun Aug 25 09:59:19 UTC 2013 -->
<TITLE>
VelocitySupport
</TITLE>

<META NAME="date" CONTENT="2013-08-25">

<LINK REL ="stylesheet" TYPE="text/css" HREF="../../../../stylesheet.css" TITLE="Style">

<SCRIPT type="text/javascript">
function windowTitle()
{
    if (location.href.indexOf('is-external=true') == -1) {
        parent.document.title="VelocitySupport";
    }
}
</SCRIPT>
<NOSCRIPT>
</NOSCRIPT>

</HEAD>

<BODY BGCOLOR="white" onload="windowTitle();">
<HR>


<!-- ========= START OF TOP NAVBAR ======= -->
<A NAME="navbar_top"><!-- --></A>
<A HREF="#skip-navbar_top" title="Skip navigation links"></A>
<TABLE BORDER="0" WIDTH="100%" CELLPADDING="1" CELLSPACING="0" SUMMARY="">
<TR>
<TD COLSPAN=2 BGCOLOR="#EEEEFF" CLASS="NavBarCell1">
<A NAME="navbar_top_firstrow"><!-- --></A>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="3" SUMMARY="">
  <TR ALIGN="center" VALIGN="top">
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../overview-summary.html"><FONT CLASS="NavBarFont1"><B>Overview</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-summary.html"><FONT CLASS="NavBarFont1"><B>Package</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#FFFFFF" CLASS="NavBarCell1Rev"> &nbsp;<FONT CLASS="NavBarFont1Rev"><B>Class</B></FONT>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-tree.html"><FONT CLASS="NavBarFont1"><B>Tree</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../deprecated-list.html"><FONT CLASS="NavBarFont1"><B>Deprecated</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../index-all.html"><FONT CLASS="NavBarFont1"><B>Index</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../help-doc.html"><FONT CLASS="NavBarFont1"><B>Help</B></FONT></A>&nbsp;</TD>
  </TR>
</TABLE>
</TD>
<TD ALIGN="right" VALIGN="top" ROWSPAN=3><EM>
</EM>
</TD>
</TR>

<TR>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
&nbsp;<A HREF="../../../../com/smartgwt/client/docs/VelocityExpression.html" title="interface in com.smartgwt.client.docs"><B>PREV CLASS</B></A>&nbsp;
&nbsp;<A HREF="../../../../com/smartgwt/client/docs/ViewFile.html" title="interface in com.smartgwt.client.docs"><B>NEXT CLASS</B></A></FONT></TD>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
  <A HREF="../../../../index.html?com/smartgwt/client/docs/VelocitySupport.html" target="_top"><B>FRAMES</B></A>  &nbsp;
&nbsp;<A HREF="VelocitySupport.html" target="_top"><B>NO FRAMES</B></A>  &nbsp;
&nbsp;<SCRIPT type="text/javascript">
  <!--
  if(window==top) {
    document.writeln('<A HREF="../../../../allclasses-noframe.html"><B>All Classes</B></A>');
  }
  //-->
</SCRIPT>
<NOSCRIPT>
  <A HREF="../../../../allclasses-noframe.html"><B>All Classes</B></A>
</NOSCRIPT>


</FONT></TD>
</TR>
<TR>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
  SUMMARY:&nbsp;NESTED&nbsp;|&nbsp;FIELD&nbsp;|&nbsp;CONSTR&nbsp;|&nbsp;METHOD</FONT></TD>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
DETAIL:&nbsp;FIELD&nbsp;|&nbsp;CONSTR&nbsp;|&nbsp;METHOD</FONT></TD>
</TR>
</TABLE>
<A NAME="skip-navbar_top"></A>
<!-- ========= END OF TOP NAVBAR ========= -->

<HR>
<!-- ======== START OF CLASS DATA ======== -->
<H2>
<FONT SIZE="-1">
com.smartgwt.client.docs</FONT>
<BR>
Interface VelocitySupport</H2>
<HR>
<DL>
<DT><PRE>public interface <B>VelocitySupport</B></DL>
</PRE>

<P>
<h3>Velocity context variables</h3>
 The Smart GWT Server provides a number of standard context variables for use in the 
  Velocity templates you write to implement <A HREF="../../../../com/smartgwt/client/docs/CustomQuerying.html" title="interface in com.smartgwt.client.docs"><CODE>custom queries</CODE></A>, 
   transaction chaining,  
  <CODE>dynamic security checking</CODE> and 
  <CODE>templated mail messages</CODE>.  These are:
  <ul>
  <li><b>$currentDate</b>. The current date/time with millisecond precision</li>
  <li><b>$transactionDate</b>. The date/time that this transaction started, with millisecond 
  precision.  If you are not using <A HREF="../../../../com/smartgwt/client/rpc/RPCManager.html#startQueue()"><CODE>queuing</CODE></A>, this value will be
  identical to <b>$currentDate</b></li>
  <li><b>$servletRequest</b>. The associated <code>HttpServletRequest</code></li> 
  <li><b>$dsRequest</b>. The associated <A HREF="../../../../com/smartgwt/client/data/DSRequest.html" title="class in com.smartgwt.client.data"><CODE>DSRequest</CODE></A> (though of course this is a
  server-side <code>DSRequest</code> object, so please also see the server-side Javadocs)</li> 
  <li><b>$primaryDSRequest</b>. Only present on cache-sync operations, this is the original
  update <code>DSRequest</code> that caused the cache-sync request to be created</li> 
  <li><b>$session</b>. The associated <code>HttpSession</code></li>
  <li><b>$httpParameters</b>. This variable gives you access to the parameters Map of the 
  associated <code>HttpServletRequest</code>; it is an alternate form of 
  <code>$servletRequest.getParameter</code></li>
  <li><b>$requestAttributes</b>. This variable gives you access to the attributes Map of the 
  associated <code>HttpServletRequest</code>; it is an alternate form of 
  <code>$servletRequest.getAttribute</code></li>
  <li><b>$sessionAttributes</b>. This variable gives you access to the attributes Map of the 
  associated <code>HttpSession</code>; it is an alternate form of 
  <code>$session.getAttribute</code></li>
  <li><b>$dataSources</b>. This variable gives you access to Smart GWT <A HREF="../../../../com/smartgwt/client/data/DataSource.html" title="class in com.smartgwt.client.data"><CODE>DataSource</CODE></A>s.  
  You access a dataSource by suffixing its name to the <code>$dataSources</code> designation.
  For example, <code>$dataSources.supplyItem</code> refers to the DataSource object called 
  "supplyItem".  You can use this approach to execute any valid DataSource method. One especially
  useful method in this context is <code>hasRecord(fieldName, value)</code> - see the 
  server-side Javadocs for more details.
  <li><b>$util</b> - A <code>DataTools</code> object, giving you access to all of that
      class's useful helper functions</li>
  </ul>
  All of these variables (other than the two dates) represent objects that can contain other 
  objects (attributes or parameters or object properties).  The variables based on the Servlet
  API (session, sessionAttributes, httpParameters, servletRequest and requestAttributes) all 
  implement the <code>Map</code> interface, so you can use the Velocity "property" shorthand 
  notation to access them.  The following usage examples show five equivalent ways to return 
  the value of the session attribute named "foo":
  <pre>
     $session.foo
     $session.get("foo")
     $session.getAttribute("foo")
     $sessionAttributes.foo
     $sessionAttributes.get("foo")
  </pre>
  In the case of <code>$servletRequest</code>, the shorthand approach accesses the attributes 
  - you need to use either <code>$httpParameters</code> or <code>$servletRequest.getParameter</code>
  to access parameters. These examples all return the value of the HTTP parameter named "bar":
  <pre>
     $httpParameters.bar
     $httpParameters.get("bar")
     $servletRequest.getParameter("bar")
  </pre>
 When you use these Velocity variables in a <CODE>customSQL</CODE> 
 clause or SQL snippet such as a <CODE>whereClause</CODE>, all
 of 
  these template variables return values that have been correctly quoted and escaped according
   to the syntax of the underlying database.  We do this because "raw" values are vulnerable to 
  <a href="http://en.wikipedia.org/wiki/SQL_injection">SQL injection attacks</a>.
  If you need access to the raw value of a variable in a SQL template, you can use the 
  <b>$rawValue</b> qualifier in front of any of the template variables, like this:<br><br><code>
  &nbsp;&nbsp;$rawValue.session.foo</code>
  <p>
  This also works for the <b>$criteria</b> and <b>$values</b> context variables (see 
  <A HREF="../../../../com/smartgwt/client/docs/CustomQuerying.html" title="interface in com.smartgwt.client.docs"><CODE>CustomQuerying</CODE></A> for details of these variables).  So:<br><br><code>
  &nbsp;&nbsp;$rawValue.criteria.customerName</code>
  </p>
  Note that <code>$rawValue</code> is only available in SQL templates.  It is not needed in
  other contexts, such as Transaction Chaining, because the value is not escaped and 
  quoted in these contexts.
  <p>
  <b>Warning</b>:  Whenever you access a template variable for use in a SQL statement, bear 
  in mind that it is <b>dangerous</b> to use <code>$rawValue</code>.  There are some cases 
  where using the raw value is necessary, but even so, all such cases are likely to be vulnerable 
  to injection attacks.  Generally, the presence of <code>$rawValue</code> in a SQL template 
  should be viewed as a red flag.
  <p>
  Finally, some example usages of these values.  
 These <CODE>values</CODE> clauses set "price" to a value extracted
 from the 
  session, and "lastUpdated" to the date/time that this transaction started:<br><br><code>
  &nbsp;&nbsp;&lt;values fieldName="price" value="$session.somePrice" /&gt;<br>
  &nbsp;&nbsp;&lt;values fieldName="lastUpdated" value="$transactionDate" /&gt;
  </code><p>
  This whereClause selects some users based on various values passed in the criteria and 
  as HTTP parameters:<br><br><code>
 &nbsp;&nbsp;&lt;whereClause&gt;department = $httpParameters.userDept AND dob &gt;=
 $criteria.dateOfBirth&lt;/whereClause&gt;
  </code><p>
  This whereClause selects some users based on various values obtained from the 
  servletRequest's attributes, using a number of equivalent techniques for accessing the 
  attributes:<pre>
    &lt;whereClause&gt;
          department = $servletRequest.dept 
      AND startDate &gt;= $requestAttributes.dateOfBirth 
      AND salary &lt; $servletRequest.getAttribute("userSalary")
    &lt;/whereClause&gt;
  </pre><p>
<P>

<P>
<HR>

<P>

<P>
<!-- ========= END OF CLASS DATA ========= -->
<HR>


<!-- ======= START OF BOTTOM NAVBAR ====== -->
<A NAME="navbar_bottom"><!-- --></A>
<A HREF="#skip-navbar_bottom" title="Skip navigation links"></A>
<TABLE BORDER="0" WIDTH="100%" CELLPADDING="1" CELLSPACING="0" SUMMARY="">
<TR>
<TD COLSPAN=2 BGCOLOR="#EEEEFF" CLASS="NavBarCell1">
<A NAME="navbar_bottom_firstrow"><!-- --></A>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="3" SUMMARY="">
  <TR ALIGN="center" VALIGN="top">
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../overview-summary.html"><FONT CLASS="NavBarFont1"><B>Overview</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-summary.html"><FONT CLASS="NavBarFont1"><B>Package</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#FFFFFF" CLASS="NavBarCell1Rev"> &nbsp;<FONT CLASS="NavBarFont1Rev"><B>Class</B></FONT>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-tree.html"><FONT CLASS="NavBarFont1"><B>Tree</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../deprecated-list.html"><FONT CLASS="NavBarFont1"><B>Deprecated</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../index-all.html"><FONT CLASS="NavBarFont1"><B>Index</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../help-doc.html"><FONT CLASS="NavBarFont1"><B>Help</B></FONT></A>&nbsp;</TD>
  </TR>
</TABLE>
</TD>
<TD ALIGN="right" VALIGN="top" ROWSPAN=3><EM>
</EM>
</TD>
</TR>

<TR>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
&nbsp;<A HREF="../../../../com/smartgwt/client/docs/VelocityExpression.html" title="interface in com.smartgwt.client.docs"><B>PREV CLASS</B></A>&nbsp;
&nbsp;<A HREF="../../../../com/smartgwt/client/docs/ViewFile.html" title="interface in com.smartgwt.client.docs"><B>NEXT CLASS</B></A></FONT></TD>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
  <A HREF="../../../../index.html?com/smartgwt/client/docs/VelocitySupport.html" target="_top"><B>FRAMES</B></A>  &nbsp;
&nbsp;<A HREF="VelocitySupport.html" target="_top"><B>NO FRAMES</B></A>  &nbsp;
&nbsp;<SCRIPT type="text/javascript">
  <!--
  if(window==top) {
    document.writeln('<A HREF="../../../../allclasses-noframe.html"><B>All Classes</B></A>');
  }
  //-->
</SCRIPT>
<NOSCRIPT>
  <A HREF="../../../../allclasses-noframe.html"><B>All Classes</B></A>
</NOSCRIPT>


</FONT></TD>
</TR>
<TR>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
  SUMMARY:&nbsp;NESTED&nbsp;|&nbsp;FIELD&nbsp;|&nbsp;CONSTR&nbsp;|&nbsp;METHOD</FONT></TD>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
DETAIL:&nbsp;FIELD&nbsp;|&nbsp;CONSTR&nbsp;|&nbsp;METHOD</FONT></TD>
</TR>
</TABLE>
<A NAME="skip-navbar_bottom"></A>
<!-- ======== END OF BOTTOM NAVBAR ======= -->

<HR>

</BODY>
</HTML>
